<!DOCTYPE html>
<html lang="en" dir="ltr">

<head>
  <meta charset="utf-8">
  <title></title>
  <link rel="stylesheet" href="./css/master.css">
    <link rel="stylesheet" href="./css/gameInterface/ceilMenu.css">
  <!-- disable standard pinch -->
  <!-- <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1.0, user-scalable=0', shrink-to-fit=no"> -->
  <meta name="apple-mobile-web-app-capable" content="yes">
  <script src="/socket.io/socket.io.js"></script>
</head>

<body>

  <canvas id="renderer"></canvas>
  <section id="screen">

  </section>
  <section id="gameInterface">
    <section id="onCeilDoubleClick">
      <div id="sectorMenu">
      </div>
      <div id="buildingMenu">
        <h1 id="buildName">Build name</h1>
        <p id="buildDescription">Building description</p>

        <div style="display:flex;justify-content: space-around">
          <div class="buildingMenu_button" id='cancelBuild'>
            <img class="sectorMenuButton_image" src="./scripts/modules/interface/game/ceilMenu/icons/cancel.png">
          </div>
          <div class="buildingMenu_button" id='aceptBuild'>
            <img class="sectorMenuButton_image" src="./scripts/modules/interface/game/ceilMenu/icons/build.png">
          </div>
        </div>
      </div>
    </section>
  </section>

</body>
<script>
  function  generateId(type,x){
      if(type === undefined){
        type = 'u'
      }
      if(x === undefined){
        x = 5;
      }
      let letters = 'AaBbCcDdEeFfGgHhIiJjKkLlMmNnPpQqRrSsTtUuVvWwXxYyZz';

      let numbers = '0123456789';
      let lettersMix,numbersMix;
      for(let i=0; i<10;i++){
        lettersMix += letters;
        numbersMix += numbers;
      }

      let mainArr = lettersMix.split('').concat(numbersMix.split(''));
      let shuffledArr = mainArr.sort(function(){
                          return Math.random() - 0.5;
                      });
      let id = type +'_';
      for(let i=0; i<=x;i++){
          id += shuffledArr[i];
      };
      return id;
  };

</script>
<script type="module">
    import {
      MAIN
    } from './scripts/main.js';
    import {
      MODULES
    } from './scripts/modules.js';

    document.addEventListener("DOMContentLoaded", function() {
      /*
      * Сразу, как страница у пользователя загрузится, точнее socket.io,
      * происходит подключение всех модулей
      *
      * ну и сразу показываем страницу регистрации
      * MAIN.interface.auth.showAuthPage();
      *
      */
      MAIN.socket = io();

      if(MAIN.socket){
        MODULES.init();
        MAIN.pages.auth.showPage();


        /*ДЛЯ ОДНОГО ИГРОКА*/
       // чтобы быстро перейти к созданию сцены
        const data = {
          login:generateId('p',5)
        };
        MAIN.userData = {
          login:data.login,
        };
        MAIN.socket.emit('auth',data);

        /*ДЛЯ ОДНОГО ИГРОКА*/





      }else{
        console.log('Socket error');
      };
    });

</script>

</html>
